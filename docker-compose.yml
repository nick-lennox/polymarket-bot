version: '3.8'

services:
  tsa-polymarket-bot:
    build: .
    container_name: tsa-polymarket-bot
    restart: unless-stopped
    environment:
      - PYTHONUNBUFFERED=1
      - POLYMARKET_PRIVATE_KEY=${POLYMARKET_PRIVATE_KEY}
      - POLYMARKET_FUNDER=${POLYMARKET_FUNDER:-}
      - TARGET_MARKET_SLUG=${TARGET_MARKET_SLUG}
      - MAX_TRADE_SIZE_USD=${MAX_TRADE_SIZE_USD:-50}
      - MAX_BUY_PRICE=${MAX_BUY_PRICE:-0.95}
      - MIN_EDGE=${MIN_EDGE:-0.05}
      - DRY_RUN=${DRY_RUN:-true}
      - POLL_INTERVAL_SECONDS=${POLL_INTERVAL_SECONDS:-30}
      - LOG_LEVEL=${LOG_LEVEL:-INFO}
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
    deploy:
      resources:
        limits:
          cpus: '0.5'
          memory: 256M
        reservations:
          cpus: '0.1'
          memory: 64M
